<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PlantCamera Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f2f4f8; color: #1f2937; }
    nav { background: #0f172a; padding: 12px; }
    .nav-inner { max-width: 1100px; margin: 0 auto; display: flex; gap: 10px; align-items: center; }
    .nav-link { color: #cbd5e1; text-decoration: none; font-weight: 700; padding: 8px 12px; border-radius: 6px; }
    .nav-link.active, .nav-link:hover { background: #1d4ed8; color: #fff; }
    main { max-width: 1100px; margin: 0 auto; padding: 12px; }
    section { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 14px; margin-bottom: 14px; }
    .notice { background: #dbeafe; border: 1px solid #93c5fd; padding: 10px; border-radius: 6px; }
    .meta { margin: 5px 0; color: #374151; }
    .error { color: #b91c1c; font-weight: 700; }
    .ok { color: #166534; font-weight: 700; }
    .logs { background: #0f172a; color: #e2e8f0; padding: 10px; border-radius: 8px; max-height: 250px; overflow: auto; white-space: pre-wrap; font-size: 13px; }
    img { width: 100%; max-width: 960px; border-radius: 8px; border: 1px solid #d1d5db; background: #fff; display: block; margin: 0 auto; transform: rotate(-90deg); transform-origin: center; }
    .toolbar { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
    button, .btn { border: none; padding: 8px 14px; border-radius: 6px; background: #22c55e; color: #06240f; font-weight: 700; cursor: pointer; text-decoration: none; display: inline-block; }
    button:hover, .btn:hover { opacity: 0.9; color: #fff; }
    .danger { background: #dc2626; color: #fff; }
    .danger:hover { background: #b91c1c; }
    .watch-btn { background: #2563eb; color: #fff; }
    .download-btn { background: #16a34a; color: #fff; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid #e5e7eb; padding: 8px; text-align: left; }
    .actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .config-form { max-width: 560px; display: grid; gap: 10px; }
    .config-form label { font-weight: 700; }
    .config-form input, .config-form select { width: 100%; padding: 8px; border: 1px solid #cbd5e1; border-radius: 6px; }
    @media (max-width: 640px) {
      main { padding: 8px; }
      .nav-inner { flex-wrap: wrap; }
      section { padding: 10px; margin-bottom: 10px; }
      button, .btn { text-align: center; }
      table, thead, tbody, th, td, tr { display: block; }
      th { display: none; }
      td { border: none; padding: 6px 0; }
      tr { border-bottom: 1px solid #e5e7eb; padding: 6px 0; }
      .actions { flex-direction: row; align-items: center; }
      .actions a, .actions form { width: auto; }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <a class="nav-link $live_nav_class" href="/?page=Live">Live</a>
      <a class="nav-link $timelapse_nav_class" href="/?page=TimeLapse">TimeLapse</a>
      <a class="nav-link $config_nav_class" href="/?page=Config">Config</a>
      <a class="nav-link $app_nav_class" href="/?page=App">App</a>
    </div>
  </nav>
  <main>
    $notice

    $live_section
    $timelapse_section
    $config_section
    $application_section
  </main>
  <script>
    setInterval(function(){
      var img=document.getElementById('liveView');
      if (img) {
        img.src='/live.jpg?t='+Date.now();
      }
    },5000);
  </script>
</body>
</html>
